(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-362987dc"],{2953:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-row",{staticClass:"cell cell-border"},[e._v("樓層")]),r("el-row",{staticClass:"cell cell-border"},[e._v("車位")]),r("el-row",{staticClass:"cell cell-border"},[e._v("坪數")]),r("el-row",{staticClass:"cell cell-border"},[e._v("總價")])],1),r("el-col",{attrs:{span:6}},[r("el-row",{staticClass:"cell cell-border"},[r("el-select",{on:{change:function(t){return e.getList()}},model:{value:e.floor,callback:function(t){e.floor=t},expression:"floor"}},e._l(e.floors,(function(e){return r("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1),r("el-row",{staticClass:"cell cell-border"},[e._v(e._s(e.has_parking_space))]),r("el-row",{staticClass:"cell cell-border"},[e._v(e._s(e.room_size))]),r("el-row",{staticClass:"cell cell-border"},[e._v(e._s(e.total_price))])],1),r("el-col",{attrs:{span:6}},[r("el-row",{staticClass:"cell cell-border"},[e._v("戶別")]),r("el-row",{staticClass:"cell cell-border"},[e._v("車位售價")]),r("el-row",{staticClass:"cell cell-border"},[e._v("房屋售價")]),r("el-row",{staticClass:"cell cell-border"},[e._v("中籤序號")])],1),r("el-col",{attrs:{span:6}},[r("el-row",{staticClass:"cell cell-border cell-border-right"},[r("el-select",{on:{change:function(t){return e.getList()}},model:{value:e.room,callback:function(t){e.room=t},expression:"room"}},e._l(e.rooms,(function(e){return r("el-option",{key:e,attrs:{label:""+e,value:e}})})),1)],1),r("el-row",{staticClass:"cell cell-border cell-border-right"},[e._v(e._s(e.parking_space_price))]),r("el-row",{staticClass:"cell cell-border cell-border-right"},[e._v(e._s(e.room_price))]),r("el-row",{staticClass:"cell cell-border cell-border-right"},[e.showDrawingNumber||e.winnerNumber.length>6?r("span",{staticStyle:{color:"red"}},[e._v(e._s(e.winnerNumber))]):e._e(),!e.showDrawingNumber&&e.winnerNumber.length<6&&0!=e.number.length?r("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.showDrawingNumber=!0,e.generatedNumber()}}},[e._v("抽籤按鈕")]):e._e()],1)],1),r("el-col",{staticClass:"lottery-content",attrs:{span:24}},[r("div",{staticStyle:{"padding-left":"20px"}},[r("p",{staticStyle:{display:"inline-block"}},[e._v("參與總抽簽數："+e._s(e.total_tickets))]),e._l(Math.ceil(e.number.length/5),(function(t){return r("el-row",{key:t},e._l(5,(function(o){return r("el-col",{key:o,attrs:{span:4}},[r("span",{style:e.number[5*(t-1)+o-1]==e.winnerNumber?"color: red":"color: #909399"},[e._v(e._s(5*(t-1)+o<=e.number.length?5*(t-1)+o+". "+e.number[5*(t-1)+o-1]:""))])])})),1)}))],2)])],1),r("div",{staticClass:"bottom"},[r("el-button",{staticClass:"button",attrs:{type:"primary",plain:""},on:{click:e.back}},[e._v("回上一頁")]),r("el-button",{staticClass:"button",attrs:{type:"warning",plain:""},on:{click:e.result}},[e._v("抽籤結果")])],1)],1)},l=[],n=r("c7eb"),c=r("1da1"),s=(r("99af"),r("caad"),r("2532"),r("50fc")),a={name:"LotteryPage",data:function(){return{showDrawingNumber:!1,floor:"2F",room:"A1",floors:["2F","3F","4F","5F","6F","7F","8F","9F","10F","11F","12F","13F","14F"],rooms:["A1","A2","A3","A5","A6","A7","A8","A9","A10","A11","A12","A13"],lotteryNumber:{},selectedFloors:[],selectedRooms:[],room_id:null,has_parking_space:"",parking_space_price:0,room_price:0,room_size:"",total_price:0,total_tickets:0,number:[],ticket_id:[],winnerNumber:""}},methods:{indexMethod:function(e){var t=e+2+"F";return t},back:function(){this.$router.push("/admin")},result:function(){this.$router.push({path:"/winner"})},generatedNumber:function(){var e=this;return Object(c["a"])(Object(n["a"])().mark((function t(){var r,o,l,c;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="".concat(e.floor).concat(e.room),o=Math.floor(Math.random()*e.number.length),l=e.number[o],c=e.ticket_id[o],e.selectedFloors.includes(e.floor)||e.selectedFloors.push(e.floor),e.selectedRooms.includes(e.room)||e.selectedRooms.push(e.room),e.lotteryNumber[r]||e.$set(e.lotteryNumber,r,[]),e.lotteryNumber[r].push(l),e.winnerNumber=l,t.next=11,Object(s["a"])({room_id:e.room_id,ticket_id:c});case 11:t.sent,e.showDrawingNumber=!0;case 13:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(c["a"])(Object(n["a"])().mark((function t(){var r,o,l,c,a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.number=[],e.ticket_id=[],t.next=4,Object(s["b"])({floor:e.floor,room:e.room});case 4:for(r=t.sent,o=r.data.list,l=r.data.number,e.has_parking_space=1==o[0].has_parking_space?"有":"無",e.parking_space_price=o[0].parking_space_price,e.room_price=o[0].room_price,e.room_size=o[0].room_size,e.total_price=o[0].total_price,e.total_tickets=o[0].total_tickets,e.room_id=o[0].id,c=0;c<l.length;c++)e.number.push(l[c].number),e.ticket_id.push(l[c].ticket_id);a=r.data.winner,a&&a.length>0?e.winnerNumber=a[0].winnerNumber:e.winnerNumber="";case 17:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getList()},watch:{floor:function(e,t){this.showDrawingNumber=!1},room:function(e,t){this.showDrawingNumber=!1}}},i=a,u=(r("9068"),r("2877")),b=Object(u["a"])(i,o,l,!1,null,"21f48fd1",null);t["default"]=b.exports},"50fc":function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return c}));var o=r("b775");function l(e){return Object(o["a"])({url:"/admin/drawing",method:"get",params:e})}function n(e){return Object(o["a"])({url:"/admin/drawingNumber",method:"post",data:e})}function c(e){return Object(o["a"])({url:"/admin/winner",method:"get",params:e})}},9068:function(e,t,r){"use strict";r("f6df")},f6df:function(e,t,r){}}]);